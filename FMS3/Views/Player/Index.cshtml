@using FMS3.Enums
@model FMS3.Models.PlayerListDisplay

@{
    ViewData["Title"] = "Player List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<br />

@if (Model.DisplayType == PlayerListDisplayTypeEnum.AllPlayers)
{
    @Component.InvokeAsync("TeamName", new { teamId = 0 }).Result
}
else
{
    @Component.InvokeAsync("TeamName", new { teamId = Model.PlayerList.First().TeamId }).Result
    <hr />

    <span> Formation: @Model.TeamFormation </span>
}

<hr/>
<table class="table">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].Rating)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].Age)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].Position)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].Value)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.PlayerList[0].InjuredWeeks)
            </th>
            @if (Model.DisplayType == PlayerListDisplayTypeEnum.MySquad
                || Model.DisplayType == PlayerListDisplayTypeEnum.OtherSquad)
            {
                <th>
                    @Html.DisplayNameFor(model => model.PlayerList[0].TeamSelection)
                </th>
            }
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.PlayerList)
        {
            <tr>

                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Rating)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Age)
                </td>
                <td>
                    @Component.InvokeAsync("PlayerPosition", new { positionId = item.Position }).Result
                </td>

                <td>
                    @Component.InvokeAsync("CashFormat", new { cashValue = item.Value }).Result
                </td>
                <td>
                    @Component.InvokeAsync("InjuryStatus", new { injuredWeeks = item.InjuredWeeks }).Result
                </td>
                @if (Model.DisplayType == PlayerListDisplayTypeEnum.MySquad
                    || Model.DisplayType == PlayerListDisplayTypeEnum.OtherSquad)
                {
                    <td>
                        @Html.DisplayFor(modelItem => item.TeamSelection)
                        @if (item.IsSelected)
                        {
                            <span>Yes</span>
                        }
                    </td>
                }
                <td>
                    @Html.ActionLink("Details", "Details", new { playerId = item.Id })
                </td>
            </tr>
        }
    </tbody>
</table>
